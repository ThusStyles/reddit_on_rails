<!DOCTYPE html>
<html>
 <head>
    <meta charset="utf-8">
  <title>Reddit On Rails</title>

   

    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%= csrf_meta_tags %>

    <!--
      IMPORTANT:
      This is Heroku specific styling. Remove to customize.
    -->
    <link href="http://heroku.github.com/template-app-bootstrap/heroku.css" rel="stylesheet">
    <!-- /// -->

    <!--
      IMPORTANT:
      To do the replacement  example for the real name application
    -->
    <script src="http://heroku.github.com/template-app-bootstrap/heroku.js"></script>
    <!-- /// -->

    <%= stylesheet_link_tag    "application"%>
  	<%= javascript_include_tag "application" %>
  	<%= csrf_meta_tags %>
  </head>

<body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
			<a class="brand" href="<%= root_path %>">Reddit on Rails</a>
			<ul class="nav">
      <li><%= link_to "Top", root_path %></li>
      <li><%= link_to "Recent", recent_path %></li>
			<li><%= link_to "New Link", new_link_path %></li>
			</ul>
			<ul class="nav pull-right">
        <%= form_tag(search_path, method: :get, class: "navbar-form pull-left") do %>
  <%= text_field_tag(:q, nil, placeholder: "search") %>
<% end %>
	<% if current_user.present? %>
    <li><%= link_to current_user.username, profile_path(current_user.username) %></li>
		<li><%= link_to "Logout", logout_path, method: :delete %></li>

	<% else %>

    <li><a href="#signup" role="button" data-toggle="modal">Sign up</a></li>
		<li><a href="#signin" role="button" data-toggle="modal">Sign in</a></li>

	<% end %>
		</ul>
			</div>
		</div>
	</div>

	<div class="container">
<% flash.each do |type, message| %>
<div data-alert="alert" class="alert alert-<%= type %>">
	 <%= content_tag :p, message %>
</div>

<% end %>

<% if !current_user.present? %>
	 <!-- Signin Modal -->
<div id="signin" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Sign in</h3>
  </div>
  <div class="modal-body">
   
    <%= simple_form_for("user", :url => user_session_path) do |f| %>

  <%= f.input :email, :autofocus => true %>

  <%= f.input :password %>


  <%= f.input :remember_me, as: :boolean %>
    <%= render "devise/shared/links" %>

  </div>

  <div class="modal-footer">
     <%= f.submit "Sign in",  class: "btn btn-success" %>

    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <% end %>

  </div>
</div>

<!-- Signup Modal -->
<div id="signup" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Sign up</h3>
  </div>
  <div class="modal-body">

  <%= simple_form_for("user", :url => user_registration_path) do |f| %>
 
  <%= f.input :email, :autofocus => true %>

  <%= f.input :username %>

  <%= f.input :password %>

  <%= f.input :password_confirmation %>

      <%= render "devise/shared/links" %>

  </div>
  <div class="modal-footer">
   <%= f.submit "Sign up", class: "btn btn-success" %>

    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <% end %>

  </div>
  </div>

  <% end %>

<%= yield %>
</div>

</body>
</html>
